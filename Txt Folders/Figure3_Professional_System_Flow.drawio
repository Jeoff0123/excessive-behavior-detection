<mxfile host="app.diagrams.net" modified="2026-02-21T00:00:00.000Z" agent="Codex" version="29.5.1">
  <diagram id="professional_flow" name="Professional System Flowchart">
    <mxGraphModel dx="1900" dy="1300" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2400" pageHeight="1800" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <mxCell id="n1" value="Start / New Activity Detected" style="ellipse;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="850" y="20" width="220" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="n2" value="Is domain trackable?" style="rhombus;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="840" y="110" width="240" height="110" as="geometry"/>
        </mxCell>

        <mxCell id="n3" value="Do nothing" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="460" y="130" width="220" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="n4" value="End" style="ellipse;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="480" y="250" width="180" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="n5" value="Update session signals&#10;(activeTimeSec, scrollCount, tabSwitchCount, revisitCount)" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="760" y="260" width="400" height="90" as="geometry"/>
        </mxCell>

        <mxCell id="n6" value="Compute per-domain active time today&#10;(mode-adjusted thresholds)" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="760" y="370" width="400" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="n7" value="Compute Stage (0-4) and RiskLevel (0/1/2)" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="760" y="470" width="400" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="n8" value="Cooldown active for this domain?" style="rhombus;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="830" y="570" width="260" height="110" as="geometry"/>
        </mxCell>

        <mxCell id="n9" value="Redirect to Block Page" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1200" y="560" width="300" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="n10" value="Show countdown" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1200" y="650" width="300" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="n11" value="Cooldown expired?" style="rhombus;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1230" y="740" width="240" height="110" as="geometry"/>
        </mxCell>

        <mxCell id="n12" value="Allow access and resume tracking" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1200" y="880" width="300" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="n13" value="Crossed into Stage &gt;= 3?&#10;(previousStage &lt; 3 and nextStage &gt;= 3)" style="rhombus;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="760" y="710" width="400" height="120" as="geometry"/>
        </mxCell>

        <mxCell id="n14" value="Start cooldown block&#10;(set cooldown + redirect)" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1200" y="980" width="300" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="n15" value="nextStage == 2 AND prompt allowed?&#10;(once/session, not snoozed, no cooldown)" style="rhombus;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="760" y="860" width="400" height="120" as="geometry"/>
        </mxCell>

        <mxCell id="n16" value="Crossed into Stage 1 AND warn allowed?&#10;(once/day per domain)" style="rhombus;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="320" y="860" width="340" height="120" as="geometry"/>
        </mxCell>

        <mxCell id="n17" value="Show non-intrusive warning" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="320" y="1010" width="340" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="n18" value="Show Stage 2 Prompt:&#10;Break 5m / Snooze / Close Tab" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="760" y="1010" width="400" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="n19" value="User choice" style="rhombus;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="840" y="1120" width="240" height="110" as="geometry"/>
        </mxCell>

        <mxCell id="n20" value="Suppress Stage 2 prompt for snooze window&#10;(with snooze cap)" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="300" y="1130" width="360" height="90" as="geometry"/>
        </mxCell>

        <mxCell id="n21" value="End session + log summary" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="760" y="1260" width="400" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="n22" value="Start 5-minute cooldown" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1200" y="1130" width="300" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="n23" value="Wait return window (10 minutes)" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1200" y="1220" width="300" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="n24" value="User returns within 10 minutes?" style="rhombus;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1230" y="1310" width="240" height="110" as="geometry"/>
        </mxCell>

        <mxCell id="n25" value="End prior session as break_resumed_new_session&#10;Start new session" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1560" y="1305" width="420" height="90" as="geometry"/>
        </mxCell>

        <mxCell id="n26" value="End session as break_no_return_10m" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1200" y="1460" width="300" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="n29" value="Continue tracking / Start new monitoring cycle" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="760" y="1440" width="400" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="n27" value="Write session record to chrome.storage.local" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="760" y="1540" width="400" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="n28" value="Idle / wait for next activity" style="ellipse;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#000000;fillColor=#ffffff;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="820" y="1660" width="280" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="e1" edge="1" parent="1" source="n1" target="n2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value=""/>
        <mxCell id="e2" edge="1" parent="1" source="n2" target="n3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value="No"/>
        <mxCell id="e3" edge="1" parent="1" source="n3" target="n4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value=""/>
        <mxCell id="e4" edge="1" parent="1" source="n2" target="n5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value="Yes"/>
        <mxCell id="e5" edge="1" parent="1" source="n5" target="n6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value=""/>
        <mxCell id="e6" edge="1" parent="1" source="n6" target="n7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value=""/>
        <mxCell id="e7" edge="1" parent="1" source="n7" target="n8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value=""/>
        <mxCell id="e8" edge="1" parent="1" source="n8" target="n9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value="Yes"/>
        <mxCell id="e9" edge="1" parent="1" source="n9" target="n10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value=""/>
        <mxCell id="e10" edge="1" parent="1" source="n10" target="n11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value=""/>
        <mxCell id="e11" edge="1" parent="1" source="n11" target="n10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value="No">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1540" y="795"/>
              <mxPoint x="1540" y="685"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e12" edge="1" parent="1" source="n11" target="n12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value="Yes"/>
        <mxCell id="e13" edge="1" parent="1" source="n12" target="n29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value="">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1710" y="920"/>
              <mxPoint x="1710" y="1475"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e14" edge="1" parent="1" source="n8" target="n13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value="No"/>
        <mxCell id="e15" edge="1" parent="1" source="n13" target="n14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value="Yes"/>
        <mxCell id="e16" edge="1" parent="1" source="n14" target="n9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value="">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1530" y="1020"/>
              <mxPoint x="1530" y="595"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e17" edge="1" parent="1" source="n13" target="n15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value="No"/>
        <mxCell id="e18" edge="1" parent="1" source="n15" target="n18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value="Yes"/>
        <mxCell id="e19" edge="1" parent="1" source="n15" target="n16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value="No"/>
        <mxCell id="e20" edge="1" parent="1" source="n16" target="n17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value="Yes"/>
        <mxCell id="e21" edge="1" parent="1" source="n17" target="n29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value=""/>
        <mxCell id="e22" edge="1" parent="1" source="n16" target="n29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value="No"/>
        <mxCell id="e23" edge="1" parent="1" source="n18" target="n19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value=""/>
        <mxCell id="e24" edge="1" parent="1" source="n19" target="n20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value="Snooze"/>
        <mxCell id="e25" edge="1" parent="1" source="n20" target="n29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value=""/>
        <mxCell id="e26" edge="1" parent="1" source="n19" target="n21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value="Close Tab"/>
        <mxCell id="e27" edge="1" parent="1" source="n21" target="n27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value=""/>
        <mxCell id="e28" edge="1" parent="1" source="n19" target="n22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value="Break 5m"/>
        <mxCell id="e29" edge="1" parent="1" source="n22" target="n23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value=""/>
        <mxCell id="e30" edge="1" parent="1" source="n23" target="n24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value=""/>
        <mxCell id="e31" edge="1" parent="1" source="n24" target="n25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value="Yes"/>
        <mxCell id="e32" edge="1" parent="1" source="n24" target="n26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value="No"/>
        <mxCell id="e33" edge="1" parent="1" source="n26" target="n27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value=""/>
        <mxCell id="e34" edge="1" parent="1" source="n25" target="n29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value="">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1990" y="1450"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e35" edge="1" parent="1" source="n29" target="n5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value="">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="700" y="1475"/>
              <mxPoint x="700" y="305"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e36" edge="1" parent="1" source="n27" target="n28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" value=""/>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
